<window-config>
    <title>Bottom Navigation</title>
    <layout width="100%" height="45" x="0" y="0" />
    <behavior draggable="false" overlay="false" resizable="false" always-on-top="true" />
    <controls title="false" minimize="false" close="false" />
</window-config>

<style>
    .modular-window,
    .window-content {
        overflow: visible !important;
    }

    .bottom-dock {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 100%;
        background-color: var(--bg-header);
        border-top: 1px solid var(--border-subtle);
        user-select: none;
        gap: 30px;
    }

    .dock-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 6px 12px;
        cursor: pointer;
        color: var(--text-muted);
        transition: all 0.2s ease;
        border-radius: 4px;
        position: relative;
    }

    .dock-item:hover {
        color: var(--text-main);
        background-color: rgba(255, 255, 255, 0.05);
    }

    /* Estilo Activo */
    .dock-item.active {
        color: var(--text-main);
        background-color: rgba(255, 255, 255, 0.1);
    }

    .dock-item.active::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 2px;
        background-color: var(--accent-color);
        box-shadow: 0 -2px 6px rgba(255, 255, 255, 0.3);
    }

    .dock-icon {
        font-size: 20px;
    }

    .dock-label {
        font-family: 'Segoe UI', sans-serif;
        font-size: 13px;
        font-weight: 600;
        text-transform: uppercase;
    }
</style>

<div class="bottom-dock">
    <div class="dock-item active" data-mode="stage">
        <span class="material-icons dock-icon">grid_view</span>
        <span class="dock-label">Stage</span>
    </div>
    <div class="dock-item" data-mode="character">
        <span class="material-icons dock-icon">accessibility_new</span>
        <span class="dock-label">Character</span>
    </div>
    <div class="dock-item" data-mode="chart">
        <span class="material-icons dock-icon">queue_music</span>
        <span class="dock-label">Chart</span>
    </div>
</div>

<script>
    (function () {
        const items = document.querySelectorAll('.dock-item');

        items.forEach(item => {
            item.addEventListener('click', () => {
                // 1. Actualización Visual
                items.forEach(i => i.classList.remove('active'));
                item.classList.add('active');

                // 2. Emisión de Evento Global
                const modeName = item.dataset.mode;
                window.dispatchEvent(new CustomEvent('editor-mode-change', {
                    detail: { mode: modeName }
                }));
            });
        });
    })();
</script>